{"version":3,"file":"__output.js","sources":["content.spec.ts"],"sourcesContent":["import { createReactiveFileSystem, ReactiveFileSystem } from '@snoka/reactive'\nimport { join } from 'path'\n\nlet fs: ReactiveFileSystem\n\ndescribe('reactive fs: file content', () => {\n  beforeEach(async () => {\n    fs = await createReactiveFileSystem({\n      baseDir: join(__dirname, 'content-example'),\n      glob: ['**/*.js'],\n    })\n  })\n\n  test('initial content is undefined', () => {\n    expect(fs.files['meow.js'].content).to.be.undefined()\n  })\n\n  test('waitForContent', async () => {\n    expect(await fs.files['meow.js'].waitForContent).to.eql('console.log(\\'meow\\')\\n')\n  })\n\n  test('reactive content (initial load)', async () => {\n    let result: string\n    fs.effect(() => {\n      result = fs.files['meow.js'].content\n    })\n    expect(result).to.be.undefined()\n    await peeky.retry(() => expect(result).to.eql('console.log(\\'meow\\')\\n'))\n  })\n\n  test('reactive content', async () => {\n    await fs.files['meow.js'].waitForContent\n    let result: string\n    fs.effect(() => {\n      result = fs.files['meow.js'].content\n    })\n    expect(result).to.eql('console.log(\\'meow\\')\\n')\n    fs.files['meow.js'].content = 'waf'\n    await peeky.retry(() => expect(result).to.eql('waf'))\n  })\n})\n"],"names":["createReactiveFileSystem","join"],"mappings":";;;;;AAGA,IAAI,EAAA,CAAA;AAEJ,QAAA,CAAS,6BAA6B,MAAM;AAC1C,EAAA,UAAA,CAAW,YAAY;AACrB,IAAA,EAAA,GAAK,MAAMA,iCAAyB,CAAA;AAAA,MAClC,OAAA,EAASC,SAAK,CAAA,SAAA,EAAW,iBAAiB,CAAA;AAAA,MAC1C,IAAA,EAAM,CAAC,SAAS,CAAA;AAAA,KACjB,CAAA,CAAA;AAAA,GACF,CAAA,CAAA;AAED,EAAA,IAAA,CAAK,gCAAgC,MAAM;AACzC,IAAO,MAAA,CAAA,EAAA,CAAG,MAAM,SAAS,CAAA,CAAE,OAAO,CAAE,CAAA,EAAA,CAAG,GAAG,SAAU,EAAA,CAAA;AAAA,GACrD,CAAA,CAAA;AAED,EAAA,IAAA,CAAK,kBAAkB,YAAY;AACjC,IAAO,MAAA,CAAA,MAAM,GAAG,KAAM,CAAA,SAAS,EAAE,cAAc,CAAA,CAAE,EAAG,CAAA,GAAA,CAAI,uBAAyB,CAAA,CAAA;AAAA,GAClF,CAAA,CAAA;AAED,EAAA,IAAA,CAAK,mCAAmC,YAAY;AAClD,IAAI,IAAA,MAAA,CAAA;AACJ,IAAA,EAAA,CAAG,OAAO,MAAM;AACd,MAAS,MAAA,GAAA,EAAA,CAAG,KAAM,CAAA,SAAS,CAAE,CAAA,OAAA,CAAA;AAAA,KAC9B,CAAA,CAAA;AACD,IAAA,MAAA,CAAO,MAAM,CAAA,CAAE,EAAG,CAAA,EAAA,CAAG,SAAU,EAAA,CAAA;AAC/B,IAAM,MAAA,KAAA,CAAM,MAAM,MAAM,MAAA,CAAO,MAAM,CAAE,CAAA,EAAA,CAAG,GAAI,CAAA,uBAAyB,CAAC,CAAA,CAAA;AAAA,GACzE,CAAA,CAAA;AAED,EAAA,IAAA,CAAK,oBAAoB,YAAY;AACnC,IAAM,MAAA,EAAA,CAAG,KAAM,CAAA,SAAS,CAAE,CAAA,cAAA,CAAA;AAC1B,IAAI,IAAA,MAAA,CAAA;AACJ,IAAA,EAAA,CAAG,OAAO,MAAM;AACd,MAAS,MAAA,GAAA,EAAA,CAAG,KAAM,CAAA,SAAS,CAAE,CAAA,OAAA,CAAA;AAAA,KAC9B,CAAA,CAAA;AACD,IAAA,MAAA,CAAO,MAAM,CAAA,CAAE,EAAG,CAAA,GAAA,CAAI,uBAAyB,CAAA,CAAA;AAC/C,IAAG,EAAA,CAAA,KAAA,CAAM,SAAS,CAAA,CAAE,OAAU,GAAA,KAAA,CAAA;AAC9B,IAAM,MAAA,KAAA,CAAM,MAAM,MAAM,MAAA,CAAO,MAAM,CAAE,CAAA,EAAA,CAAG,GAAI,CAAA,KAAK,CAAC,CAAA,CAAA;AAAA,GACrD,CAAA,CAAA;AACH,CAAC,CAAA;;"}